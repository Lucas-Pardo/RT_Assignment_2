<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RT_Assignment_2: Assignment 2 (RT1)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT_Assignment_2
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">ROS package implementing an action client to move a mobile robot using an action server present at https://github.com/CarmineD8/assignment_2_2022</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Assignment 2 (RT1) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h1>
<p>This assignment is built upon the following <a href="https://github.com/CarmineD8/assignment_2_2022">ros package</a>. This base package implements the <a href="https://en.wikipedia.org/wiki/Bug_algorithm">bug 0 algorithm</a> as an action server in python and makes use of Rviz and Gazebo to simulate everything. These two pieces of software are included in the full instalation of ROS Noetic. Python 3 must be the default version.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Assignment description</h1>
<p>The goal of the assignment is to create a standalone ros package based on the <a href="https://github.com/CarmineD8/assignment_2_2022">base package</a> with the following characteristics:</p>
<ul>
<li>A node (A) implementing an action client that allows the user to set the goal of the robot (its position) or cancel it. This node also needs to publish the position and velocity of the robot as a custom message.</li>
<li>A node (B) implementing a service server that when called prints the number of goals reached and cancelled.</li>
<li>A node (C) that subscribes to the robot's position and velocity using the custom message published by node A and prints several stats such as distance to goal and average speed. The frequency at which it prints information can be set by the user.</li>
<li>A launch file that starts the whole simulation and sets the different parameters needed.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
How to run the program</h1>
<p>The whole simulation including the contents of this assignment can be run using the following command after initializing ros (<em>roscore</em>) and compiling the package (<em>catkin_make</em>):</p>
<div class="fragment"><div class="line">roslaunch assignment_rt1_2 assignment.launch rate:=(R) goal_x:=(GX) goal_y:=(GY)</div>
</div><!-- fragment --><p>The values <code>(R)</code>, <code>(GX)</code> and <code>(GY)</code> are the user input. The launch file is explained later but the <code>rate</code> argument has a default value so <code>rate:=(R)</code> can be omitted.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
In-depth explanation of the code</h1>
<p>Every cpp file is adecuately commented to understand what is being done but here we provide a more detailed explanation and the motive behind every decision.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Node A (move_to_goal.cpp)</h2>
<p>Setting the goal is easy and can be done just by passing the goal position as argument to the function (<em>argv</em>). This can be parsed and sent to the action server. However, we also must be able to cancel the goal at any time, which means that we need to check for user input periodically. We must also publish the custom message with the given rate.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
&lt;strong&gt;Pseudocode&lt;/strong&gt;</h3>
<p>The basic pseudocode for node A can be the following:</p>
<div class="fragment"><div class="line">goal, rate = parse arguments</div>
<div class="line">send goal to action server</div>
<div class="line"> </div>
<div class="line">while action is not finished:</div>
<div class="line">    if there is user input to cancel goal:</div>
<div class="line">        cancel goal</div>
<div class="line">        break loop</div>
<div class="line">    check for callbacks (&quot;/odom&quot;)</div>
<div class="line">    publish custom message</div>
<div class="line">    sleep at the given rate</div>
</div><!-- fragment --><p>Our code is a little different in the sense that it cycles itself after finishing to allow the user to input a new goal, so in reality, this pseudocode would be inside a loop.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
&lt;strong&gt;Argument parsing&lt;/strong&gt;</h3>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a>, <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a>;</div>
<div class="line">ros::Rate *r;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Check number of arguments</span></div>
<div class="line"><span class="keywordflow">if</span> (argc == 4) {</div>
<div class="line">    r = <span class="keyword">new</span> ros::Rate(atof(argv[1]));</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = atof(argv[2]);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = atof(argv[3]);</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argc == 3) {</div>
<div class="line">    r = <span class="keyword">new</span> ros::Rate(5);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = atof(argv[1]);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = atof(argv[2]);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    ROS_INFO(<span class="stringliteral">&quot;Wrong number of arguments: (Rate) (goal_x goal_y). Starting with default values (5) (2, -5).&quot;</span>);</div>
<div class="line">    r = <span class="keyword">new</span> ros::Rate(5);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = 2.0;</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = -5.0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>As we can see in the code, it was designed to be able to run with different parameters. It can run with all three parameters given. The rate can be omitted, in which case the default rate of 5 Hz will be used. In any other case the arguments are considered to be incomplete, in which case a warning message is given and the node is executed with some default values.</p>
<p>This is not really useful for the complete execution of the assignment (using the launch file) since it will always have the three arguments, else the launch itself fails. Nevertheless, it is useful when the node is run manually.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
&lt;strong&gt;Checking user input&lt;/strong&gt;</h3>
<p>An easy way to check for user input in non-blocking mode is using a <code>select</code> with zero timeout.</p>
<div class="fragment"><div class="line"><span class="comment">// Variables for select()</span></div>
<div class="line">fd_set rfds;</div>
<div class="line"><span class="keywordtype">int</span> retval;</div>
<div class="line">std::string cmd;</div>
<div class="line"><span class="keyword">struct </span>timeval tv = {0, 0};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create the set of read fds:</span></div>
<div class="line">FD_ZERO(&amp;rfds);</div>
<div class="line">FD_SET(STDIN_FILENO, &amp;rfds);</div>
<div class="line"> </div>
<div class="line">retval = select(STDIN_FILENO+1, &amp;rfds, NULL, NULL, &amp;tv);</div>
<div class="line"><span class="keywordflow">if</span> (retval &lt; 0 &amp;&amp; errno != EINTR) {</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Error in select: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span> <span class="keywordflow">if</span> (retval) {</div>
<div class="line">    std::cin &gt;&gt; cmd;</div>
<div class="line">    <span class="keywordflow">if</span> (cmd == <span class="stringliteral">&quot;q&quot;</span>) {</div>
<div class="line">        <span class="comment">// Cancel goal</span></div>
<div class="line">        ac.cancelGoal();</div>
<div class="line">        ROS_INFO(<span class="stringliteral">&quot;Goal cancelled.&quot;</span>);</div>
<div class="line">        <span class="comment">// Change param</span></div>
<div class="line">        <span class="keywordtype">int</span> gc;</div>
<div class="line">        <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.getParam(<span class="stringliteral">&quot;/goals_cancelled&quot;</span>, gc);</div>
<div class="line">        <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.setParam(<span class="stringliteral">&quot;/goals_cancelled&quot;</span>, gc + 1);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>As we can see, we only read from the input (<code>cin</code>) if there is something available to read, and in this case, if that is the letter 'q' we cancel the goal (which is explained later).</p>
<h3><a class="anchor" id="autotoc_md9"></a>
&lt;strong&gt;Main loop&lt;/strong&gt;</h3>
<p>The main loop is where we continuosly check for user input as explained, check for messages from <code>"/odom"</code>, and publish the custom message. The loop runs until the robot reaches the goal, ros is shutdown or the goal is cancelled (<code>break</code> in the previous code).</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> finished = ac.waitForResult(r-&gt;expectedCycleTime());</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span> (!finished &amp;&amp; ros::ok()) { </div>
<div class="line">    ...</div>
<div class="line">    finished = ac.waitForResult(r-&gt;expectedCycleTime());</div>
<div class="line">}</div>
</div><!-- fragment --><p>We take advantage of the function <code>waitForResult</code>, which can take as argument a duration to wait for, to make the program sleep for the given rate.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
&lt;strong&gt;Publisher and subscriber&lt;/strong&gt;</h3>
<p>To obtain the information about the robot such as position and velocity we use the information published in the topic <code>"/odom"</code> through the callback function <code>get_status</code>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>, <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a>, <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a>, <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="move__to__goal_8cpp.html#a6067cf186c9a69519cbd89482fd7874d">get_status</a>(<span class="keyword">const</span> nav_msgs::Odometry::ConstPtr &amp;msg) {</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a> = (float) msg-&gt;pose.pose.position.x;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a> = (<span class="keywordtype">float</span>) msg-&gt;pose.pose.position.y;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a> = (float) msg-&gt;twist.twist.linear.x;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a> = (<span class="keywordtype">float</span>) msg-&gt;twist.twist.linear.y;</div>
<div class="line">}</div>
</div><!-- fragment --><p>To publish the information we need to node C, we use the custom message defined in the <em>msg</em> folder, <code>RobotStatus.msg</code>:</p>
<div class="fragment"><div class="line">float32 x</div>
<div class="line">float32 y</div>
<div class="line">float32 vel_x</div>
<div class="line">float32 vel_y</div>
<div class="line">float32 goal_x</div>
<div class="line">float32 goal_y</div>
</div><!-- fragment --><ul>
<li>Notice that we also send the goal position as part of the message. The reason why is explained in <a href="#node-c-robot_statuscpp">node C</a>.</li>
</ul>
<p>In node A we simply publish this information to the topic <code>"/robot/status"</code>:</p>
<div class="fragment"><div class="line"><span class="comment">// Publisher:</span></div>
<div class="line">ros::Publisher pub;</div>
<div class="line">pub = <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.advertise&lt;assignment_rt1_2::RobotStatus&gt;(<span class="stringliteral">&quot;/robot/status&quot;</span>, 1);</div>
<div class="line">assignment_rt1_2::RobotStatus rs;</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">// Publish status:</span></div>
<div class="line">rs.x = <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>;</div>
<div class="line">rs.y = <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a>;</div>
<div class="line">rs.vel_x = <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a>;</div>
<div class="line">rs.vel_y = <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a>;</div>
<div class="line">rs.goal_x = <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a>;</div>
<div class="line">rs.goal_y = <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a>;</div>
<div class="line">pub.publish(rs);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11"></a>
&lt;strong&gt;Information about the goals&lt;/strong&gt;</h3>
<p>As it is explained in the <a href="#assignment-description">assignment description</a>, node B must have access to the goals both reached and cancelled, information that is only available in the action server or client. That means that we need a way to send information from one node to the other. Since node B is a service server, the usual way to convey this information would be through a <em>request</em>, but for reasons explained later, we have decided to use the <em>parameter server</em>. We can use a <em>param</em> to hold the number of goals reached and another for the goals cancelled. So in both cases, we just read the current value of that <em>param</em> and set it to it plus one:</p>
<div class="fragment"><div class="line"><span class="comment">// Change param</span></div>
<div class="line"><span class="keywordtype">int</span> gc;</div>
<div class="line"><a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.getParam(<span class="stringliteral">&quot;/goals_cancelled&quot;</span>, gc);</div>
<div class="line"><a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.setParam(<span class="stringliteral">&quot;/goals_cancelled&quot;</span>, gc + 1);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md12"></a>
&lt;strong&gt;Exit routine&lt;/strong&gt;</h3>
<p>Exiting the main loop only occurs, under normal circunstances, after the robot has either reached the goal or it has been cancelled. If the <code>finished</code> flag is <code>true</code>, the goal has been reached and we change the <em>param</em>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (finished) {</div>
<div class="line">    ROS_INFO(<span class="stringliteral">&quot;Goal reached.&quot;</span>);</div>
<div class="line">    <span class="comment">// Change param</span></div>
<div class="line">    <span class="keywordtype">int</span> gr;</div>
<div class="line">    <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.getParam(<span class="stringliteral">&quot;/goals_reached&quot;</span>, gr);</div>
<div class="line">    <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.setParam(<span class="stringliteral">&quot;/goals_reached&quot;</span>, gr + 1);</div>
<div class="line">} </div>
</div><!-- fragment --><p>After finishing, the program calls the service of node B to print the goals:</p>
<div class="fragment"><div class="line"><span class="comment">// Call goals service</span></div>
<div class="line">ros::ServiceClient client = <a class="code" href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a>.serviceClient&lt;assignment_rt1_2::Goals&gt;(<span class="stringliteral">&quot;/goals&quot;</span>);</div>
<div class="line">assignment_rt1_2::Goals g;</div>
<div class="line">client.call(g);</div>
</div><!-- fragment --><p>As we said in the <a href="#pseudocode">pseudocode</a>, we designed the code to allow the user to input a new goal without exiting the program and having to call it again manually (rosrun ...). To do that, we create an infinite loop that is only broken when the user inputs "e" to exit or "r" to retry. After inputting "r" the user is then prompted to enter the new goal position:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Program finished. Write &#39;r&#39; to retry with another goal or &#39;e&#39; to exit:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::string buf;</div>
<div class="line">    std::cin &gt;&gt; buf;</div>
<div class="line">    <span class="keywordflow">if</span> (buf == <span class="stringliteral">&quot;e&quot;</span> || buf == <span class="stringliteral">&quot;E&quot;</span>) <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (buf == <span class="stringliteral">&quot;r&quot;</span> || buf == <span class="stringliteral">&quot;R&quot;</span>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Enter new goal_x:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cin &gt;&gt; buf;</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = atof(buf.c_str());</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Enter new goal_y:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cin &gt;&gt; buf;</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = atof(buf.c_str());</div>
<div class="line">        <span class="keywordflow">goto</span> cycle;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>We make use of the <code>goto</code> function and the label <code>cycle</code> to jump to a previous point in the program, just before sending the goal:</p>
<div class="fragment"><div class="line">cycle:</div>
<div class="line"> </div>
<div class="line">goal.target_pose.pose.position.x = <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a>;</div>
<div class="line">goal.target_pose.pose.position.y = <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a>;</div>
<div class="line">ac.sendGoal(goal);</div>
<div class="line">ROS_INFO(<span class="stringliteral">&quot;Goal sent, press q to cancel task.&quot;</span>);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Node B (goals_status.cpp)</h2>
<p>As we explained in <a href="#node-a-move_to_goalcpp">node A</a>, we use <em>params</em> to save the amount of goals reached and cancelled to the <em>parameter server</em>. The node then creates the service server <code>"/goals"</code> and waits infinitely for calls:</p>
<div class="fragment"><div class="line"><span class="comment">// Service server:</span></div>
<div class="line">ros::ServiceServer ss = (*nh).advertiseService(<span class="stringliteral">&quot;/goals&quot;</span>, <a class="code" href="goals__status_8cpp.html#a142ca2bd3a36c5ef03781797f4a2cd11">get_goals</a>);</div>
<div class="line"> </div>
<div class="line">ROS_INFO(<span class="stringliteral">&quot;Service server initialized.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">ros::spin();</div>
</div><!-- fragment --><p>The callback function <code>get_goals</code> just gets the <em>params</em> from the <em>parameter server</em> and prints them:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code" href="goals__status_8cpp.html#a142ca2bd3a36c5ef03781797f4a2cd11">get_goals</a>(assignment_rt1_2::Goals::Request &amp;req, assignment_rt1_2::Goals::Response &amp;res) {</div>
<div class="line">    <span class="keywordtype">int</span> gr, gc;</div>
<div class="line">    <span class="keywordflow">if</span> (!(*nh).getParam(<span class="stringliteral">&quot;/goals_reached&quot;</span>, gr)) {</div>
<div class="line">        ROS_INFO(<span class="stringliteral">&quot;Could not retrieve param /goals_succeeded.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;   </div>
<div class="line">    }    </div>
<div class="line">    <span class="keywordflow">if</span> (!(*nh).getParam(<span class="stringliteral">&quot;/goals_cancelled&quot;</span>, gc)) {</div>
<div class="line">        ROS_INFO(<span class="stringliteral">&quot;Could not retrieve param /goals_cancelled.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>; </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Goals reached: &quot;</span> &lt;&lt; gr &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Goals cancelled: &quot;</span> &lt;&lt; gc &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;------------------------&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Because the service just prints <em>params</em>, there is no need for a <code>request</code> or <code>response</code>. As such, the service <code>Goals.srv</code> defined in the <em>srv</em> folder is just an empty service:</p>
<div class="fragment"><div class="line">---</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md14"></a>
&lt;strong&gt;Other possible approaches&lt;/strong&gt;</h3>
<p>The whole reason behind using the <em>parameter server</em> to hold the goals reached and cancelled is because we only have access to that information while the action client (node A) is running. We could suppose that node A will be run continuously, i.e. that the user will always use the retry functionality of the program, in which case we could have local variables counting the number of goals reached and cancelled and send them as part of the request like this:</p>
<div class="fragment"><div class="line">int goals_reached</div>
<div class="line">int goals_cancelled</div>
<div class="line">---</div>
</div><!-- fragment --><p>That approach however, would not allow for manual calls of the service since the user would need to know the amount before. A better approach would be to have the local counting variables in node B and node A just sends a <code>bool</code> variable of whether the goal has been cancelled or not (reached) as part of the request:</p>
<div class="fragment"><div class="line">bool cancelled</div>
<div class="line">---</div>
</div><!-- fragment --><p>That would work fine for manual calls, although we would need to send as part of the request whether the last goal was cancelled or not. The important part is that it would work even if node A is closed and opened again, which was our initial concern. However, if the service server (node B) is closed and opened again, the goals will be reset. Without modifying the action server, the only way to save the goals since the beggining of the simulation regardless of whether node A or B have been closed, is through the <em>parameter server</em>.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Node C (robot_status.cpp)</h2>
<p>This node reads information published by node A to print different stats about the robot.</p>
<h3><a class="anchor" id="autotoc_md16"></a>
&lt;strong&gt;Argument parsing&lt;/strong&gt;</h3>
<p>Node C only takes as argument the rate at which it prints information:</p>
<div class="fragment"><div class="line"><span class="comment">// Check arguments for rate:</span></div>
<div class="line">ros::Rate *r;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (argc == 2) {</div>
<div class="line">    r = <span class="keyword">new</span> ros::Rate((<span class="keywordtype">double</span>) atof(argv[1]));</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    ROS_INFO(<span class="stringliteral">&quot;Wrong number of arguments: (Rate).&quot;</span>);</div>
<div class="line">    exit(1);</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md17"></a>
&lt;strong&gt;Callback function&lt;/strong&gt;</h3>
<p>The whole behaviour of this node is governed by its callback function. The only thing that this node does is check for messages published by node A and use the callback function:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span>(ros::ok()) {</div>
<div class="line">        </div>
<div class="line">    <span class="comment">// Check for callbacks:</span></div>
<div class="line">    ros::spinOnce();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Sleep at the given rate:</span></div>
<div class="line">    r-&gt;sleep();</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><b>Note:</b> Instead of using <code>ros::spin()</code> as in node B, we use <code>ros::spinOnce()</code> so that we can sleep manually at the given rate.</li>
</ul>
<p>The callback function is divided in two parts: the proper callback function and an auxiliary function that only prints the stats. The callback function <code>get_status</code> takes the contents of the custom message and saves it in gloabal variables:</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>, <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a>, <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a>, <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a>, <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = 0, <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = 0;</div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="robot__status_8cpp.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0;</div>
<div class="line"><span class="keywordtype">float</span> <a class="code" href="robot__status_8cpp.html#ab8c50d62f205e59cf3c02db744e2bf86">acc_vx</a> = 0, <a class="code" href="robot__status_8cpp.html#a49e8ddc680bdec2d0944af604628b5df">acc_vy</a> = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="move__to__goal_8cpp.html#a6067cf186c9a69519cbd89482fd7874d">get_status</a>(<span class="keyword">const</span> assignment_rt1_2::RobotStatus::ConstPtr &amp;msg) {</div>
<div class="line">    <span class="comment">// Check if goal changed:</span></div>
<div class="line">    <span class="keywordtype">float</span> eps = 1e-3; <span class="comment">// Threshold for the goal change</span></div>
<div class="line">    <span class="keywordflow">if</span> (std::abs(msg-&gt;goal_x - <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a>) &gt; eps || std::abs(msg-&gt;goal_y - <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a>) &gt; eps) {</div>
<div class="line">        ROS_INFO(<span class="stringliteral">&quot;Goal change detected, resetting stats.&quot;</span>);</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = msg-&gt;goal_x;</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = msg-&gt;goal_y;</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#ab8c50d62f205e59cf3c02db744e2bf86">acc_vx</a> = 0;</div>
<div class="line">        <a class="code" href="robot__status_8cpp.html#a49e8ddc680bdec2d0944af604628b5df">acc_vy</a> = 0;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Copy parameters from the message:</span></div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a> = msg-&gt;x;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a> = msg-&gt;y;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a> = msg-&gt;vel_x;</div>
<div class="line">    <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a> = msg-&gt;vel_y;</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#ab8c50d62f205e59cf3c02db744e2bf86">acc_vx</a> += std::abs(<a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a>);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a49e8ddc680bdec2d0944af604628b5df">acc_vy</a> += std::abs(<a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a>);</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++;</div>
<div class="line">    <a class="code" href="robot__status_8cpp.html#a92cf1cbd2985da1104d70aa3f4d241e0">print_msg</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><p>The reason why we also send the goal position in the custom message is to be able to detect if the goal has changed and reset the stats, in this case, the average velocity must be reset. Of course, another reason is that we need access to the goal position to compute the distance from the robot to the goal. This way, the node can be run continuously.</p>
<p>Another aspect is that instead of saving every previous velocity in an array, we just save their absolute cumulative sum (<code>acc_vx</code>, <code>acc_vy</code>) and the number of callbacks (<code>c</code>) so that the average speed in either component can be computed as <code>acc</code> / <code>c</code>.</p>
<p>The function <code>print_msg</code> that is called at the end of the callback function is the one that computes and prints all the information:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="robot__status_8cpp.html#a92cf1cbd2985da1104d70aa3f4d241e0">print_msg</a>() {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;ROBOT STATUS:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;x = &quot;</span> &lt;&lt; <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;y = &quot;</span> &lt;&lt; <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;vel_x = &quot;</span> &lt;&lt; <a class="code" href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;vel_y = &quot;</span> &lt;&lt; <a class="code" href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;======================================================&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;ADVANCED STATUS:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Distance to goal: &quot;</span> &lt;&lt; std::sqrt((<a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> - <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>)*(<a class="code" href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> - <a class="code" href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a>) + (<a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> - <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a>)*(<a class="code" href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> - <a class="code" href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a>)) &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordtype">float</span> av_x = <a class="code" href="robot__status_8cpp.html#ab8c50d62f205e59cf3c02db744e2bf86">acc_vx</a> / <a class="code" href="robot__status_8cpp.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line">    <span class="keywordtype">float</span> av_y = <a class="code" href="robot__status_8cpp.html#a49e8ddc680bdec2d0944af604628b5df">acc_vy</a> / <a class="code" href="robot__status_8cpp.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>; </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Average speed in x: &quot;</span> &lt;&lt; av_x &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Average speed in y: &quot;</span> &lt;&lt; av_y &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Average speed: &quot;</span> &lt;&lt; std::sqrt(av_x*av_x + av_y*av_y) &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;======================================================&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;------------------------------------------------------&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;======================================================&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p>An interesting fact is that regardless of where the goal is, more than 90% of the speed is in the <em>x</em> direction, even if the path is a straight line parallel to the Y-axis. The only reasonable explanation for this behaviour is that the information published in the topic <code>"/odom"</code> regarding the velocity of the robot (<code>Twist</code>) is given with respect to the local frame of reference of the robot. Which would make sense since the robot always moves forward and rotates about its axis to make a turn.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Launch file</h2>
<p>As stated in the section <a href="#how-to-run-the-program">How to run the program</a>, we provide the launch file <code>assignment.launch</code> in the <em>launch</em> folder to start up the whole simulation, including the nodes in the <a href="https://github.com/CarmineD8/assignment_2_2022">base package</a>.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">launch</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">include</span> <span class="keyword">file</span>=<span class="stringliteral">&quot;$(find assignment_2_2022)/launch/assignment1.launch&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">arg</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;rate&quot;</span> <span class="keyword">default</span>=<span class="stringliteral">&quot;2&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">arg</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;goal_x&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">arg</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;goal_y&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;/goals_reached&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;int&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">param</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;/goals_cancelled&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;int&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">node</span> <span class="keyword">pkg</span>=<span class="stringliteral">&quot;assignment_rt1_2&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;set_goal_node&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;set_goal_node&quot;</span> <span class="keyword">output</span>=<span class="stringliteral">&quot;screen&quot;</span> <span class="keyword">launch-prefix</span>=<span class="stringliteral">&quot;terminator -x&quot;</span> <span class="keyword">args</span>=<span class="stringliteral">&quot;$(arg rate) $(arg goal_x) $(arg goal_y)&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">node</span> <span class="keyword">pkg</span>=<span class="stringliteral">&quot;assignment_rt1_2&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;robot_status_node&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;robot_status_node&quot;</span> <span class="keyword">output</span>=<span class="stringliteral">&quot;screen&quot;</span> <span class="keyword">launch-prefix</span>=<span class="stringliteral">&quot;terminator -x&quot;</span> <span class="keyword">args</span>=<span class="stringliteral">&quot;$(arg rate)&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">node</span> <span class="keyword">pkg</span>=<span class="stringliteral">&quot;assignment_rt1_2&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;goals_status_node&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;goals_status_node&quot;</span> <span class="keyword">output</span>=<span class="stringliteral">&quot;screen&quot;</span> <span class="keyword">launch-prefix</span>=<span class="stringliteral">&quot;terminator -x&quot;</span> /&gt;</div>
<div class="line">&lt;/<span class="keywordtype">launch</span>&gt;</div>
</div><!-- fragment --><p>As we can see, the first line launches the launch file provided in the <a href="https://github.com/CarmineD8/assignment_2_2022">base package</a>. Then we define the arguments that the launch file takes: <code>rate</code>, <code>goal_x</code> and <code>goal_y</code>. We decided to provide a default value of 2 Hz to the <code>rate</code> so that it can be omitted. Then, we define and set the <em>params</em> <code>"/goals_reached"</code> and <code>"/goals_cancelled"</code> to zero. Finally, we just initialize each node (A, B and C) with the corresponding arguments in a new terminal using the option <code>launch-prefix</code>.</p>
<ul>
<li><b>Note:</b> We use <em>terminator</em> terminals to launch the nodes, it can be installed using the command <code>sudo apt install terminator</code>. Nevertheless, the terminal used to launch the nodes can also be changed manually, for instance, "terminator -x" can be substituted by "gnome-terminal -x", "konsole -e", "xterm -e" or whatever other terminal. However, in our <em>WSL</em> system with Ubuntu 20.04, <em>konsole</em> terminal crashes nodes A and C for a reason we have not been able to determine.</li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
Improvements</h1>
<ul>
<li><b>Error handling:</b> There is very few error checking and handling in the code, which is not ideal.</li>
<li><b>Wrong input handling:</b> There are several instances in which the user provide an input to the program and we do not check or handle it properly. For instance, we do not check if the arguments passed (<code>rate</code>, <code>goal_x</code> and <code>goal_y</code>) are numbers, we just assume they are, which will produce errors when converting it from string to float in the case that they are not numbers. Error that we have not handled. The other instance of wrong input is in the <a href="#exit-routine">exit routine</a> of node A. To retry the user must input the new position of the goal, numbers that we do not check whether they are numbers and would produce the same error as before.</li>
<li><b>Proper exiting:</b> Only node A has a proper exit routine in which the program finishes and returns zero. The other two nodes are run forever and can only be stopped with signals (<code>SIGINT</code>, <code>SIGTERM</code>, etc.). Right now the easiest way is to just close the terminal in which they are initialized, which automatically sends signal <code>SIGHUP</code> to terminate the node. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="arobot__status_8cpp_html_a92cf1cbd2985da1104d70aa3f4d241e0"><div class="ttname"><a href="robot__status_8cpp.html#a92cf1cbd2985da1104d70aa3f4d241e0">print_msg</a></div><div class="ttdeci">void print_msg()</div><div class="ttdoc">Function that computes and prints information to the terminal.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:39</div></div>
<div class="ttc" id="arobot__status_8cpp_html_a86a424410ae6b4f43baca838da5f993b"><div class="ttname"><a href="robot__status_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a></div><div class="ttdeci">float goal_y</div><div class="ttdoc">Local copy of the y position of the current goal.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:27</div></div>
<div class="ttc" id="amove__to__goal_8cpp_html_a1dd0876197a1e2dba35d41d6a6d9eab4"><div class="ttname"><a href="move__to__goal_8cpp.html#a1dd0876197a1e2dba35d41d6a6d9eab4">vel_y</a></div><div class="ttdeci">float vel_y</div><div class="ttdoc">Local copy of the y component of the velocity.</div><div class="ttdef"><b>Definition:</b> move_to_goal.cpp:44</div></div>
<div class="ttc" id="amove__to__goal_8cpp_html_a6067cf186c9a69519cbd89482fd7874d"><div class="ttname"><a href="move__to__goal_8cpp.html#a6067cf186c9a69519cbd89482fd7874d">get_status</a></div><div class="ttdeci">void get_status(const nav_msgs::Odometry::ConstPtr &amp;msg)</div><div class="ttdoc">Callback function to read robot status.</div><div class="ttdef"><b>Definition:</b> move_to_goal.cpp:53</div></div>
<div class="ttc" id="agoals__status_8cpp_html_a142ca2bd3a36c5ef03781797f4a2cd11"><div class="ttname"><a href="goals__status_8cpp.html#a142ca2bd3a36c5ef03781797f4a2cd11">get_goals</a></div><div class="ttdeci">bool get_goals(assignment_rt1_2::Goals::Request &amp;req, assignment_rt1_2::Goals::Response &amp;res)</div><div class="ttdoc">Callback function that gets and prints goals.</div><div class="ttdef"><b>Definition:</b> goals_status.cpp:38</div></div>
<div class="ttc" id="arobot__status_8cpp_html_a4e1e0e72dd773439e333c84dd762a9c3"><div class="ttname"><a href="robot__status_8cpp.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a></div><div class="ttdeci">int c</div><div class="ttdoc">Number of messages received for current goal.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:28</div></div>
<div class="ttc" id="amove__to__goal_8cpp_html_ad0da36b2558901e21e7a30f6c227a45e"><div class="ttname"><a href="move__to__goal_8cpp.html#ad0da36b2558901e21e7a30f6c227a45e">x</a></div><div class="ttdeci">float x</div><div class="ttdoc">Local copy of the x position of the robot.</div><div class="ttdef"><b>Definition:</b> move_to_goal.cpp:41</div></div>
<div class="ttc" id="amove__to__goal_8cpp_html_a4b312b3530217eb51cbad6e930610f6b"><div class="ttname"><a href="move__to__goal_8cpp.html#a4b312b3530217eb51cbad6e930610f6b">vel_x</a></div><div class="ttdeci">float vel_x</div><div class="ttdoc">Local copy of the x component of the velocity.</div><div class="ttdef"><b>Definition:</b> move_to_goal.cpp:43</div></div>
<div class="ttc" id="amove__to__goal_8cpp_html_aa4f0d3eebc3c443f9be81bf48561a217"><div class="ttname"><a href="move__to__goal_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a></div><div class="ttdeci">float y</div><div class="ttdoc">Local copy of the y position of the robot.</div><div class="ttdef"><b>Definition:</b> move_to_goal.cpp:42</div></div>
<div class="ttc" id="arobot__status_8cpp_html_ab8c50d62f205e59cf3c02db744e2bf86"><div class="ttname"><a href="robot__status_8cpp.html#ab8c50d62f205e59cf3c02db744e2bf86">acc_vx</a></div><div class="ttdeci">float acc_vx</div><div class="ttdoc">Accumulation of the x component of the velocity.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:29</div></div>
<div class="ttc" id="agoals__status_8cpp_html_a898856750d65dc6e6706ea4772115d04"><div class="ttname"><a href="goals__status_8cpp.html#a898856750d65dc6e6706ea4772115d04">nh</a></div><div class="ttdeci">ros::NodeHandle * nh</div><div class="ttdoc">Global declaration of node handler.</div><div class="ttdef"><b>Definition:</b> goals_status.cpp:26</div></div>
<div class="ttc" id="arobot__status_8cpp_html_ac0df33c619e3c146b6f892ec65219336"><div class="ttname"><a href="robot__status_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a></div><div class="ttdeci">float goal_x</div><div class="ttdoc">Local copy of the x position of the current goal.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:26</div></div>
<div class="ttc" id="arobot__status_8cpp_html_a49e8ddc680bdec2d0944af604628b5df"><div class="ttname"><a href="robot__status_8cpp.html#a49e8ddc680bdec2d0944af604628b5df">acc_vy</a></div><div class="ttdeci">float acc_vy</div><div class="ttdoc">Accumulation of the y component of the velocity.</div><div class="ttdef"><b>Definition:</b> robot_status.cpp:30</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
